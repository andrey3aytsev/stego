function fraction_2_bin(t){var e=Math.round(255*t);return e=add_zeros(e.toString(2),8)}function add_zeros(t,e){return t=t.toString(),t.length<e?add_zeros("0"+t,e):t}function download_canvas(){var t=canvas.toDataURL();this.href=t}var ABC={toAscii:function(t){return t.replace(/\s*[01]{8}\s*/g,function(t){return String.fromCharCode(parseInt(t,2))})},toBinary:function(t,e){return t.replace(/[\s\S]/g,function(t){return t=ABC.zeroPad(t.charCodeAt().toString(2)),0==e?t:t})},zeroPad:function(t){return"00000000".slice(String(t).length)+t}},canvas=document.getElementById("canvas-pixels"),ctx=canvas.getContext("2d");document.getElementById("btn-download").addEventListener("click",download_canvas,!1);var pixel_shift=500,source_img=document.getElementById("mona"),source_img_width=source_img.clientWidth,source_img_height=source_img.clientHeight;ctx.canvas.width=source_img_width,ctx.canvas.height=source_img_height;var pix_wid=1/source_img_width*100,raster=new Raster("mona"),colors_cont=$("#bin"),pix_block=$("#pix_block"),pixels_colors=[],lsb=[];$("#begin").click(function(t){var e=$("#input").val(),n=ABC.toBinary(e),r=0;raster.size=new Size(source_img_width,source_img_height);for(var i=0;i<raster.height;i++)for(var o=0;o<raster.width;o++){var a=raster.getPixel(o,i),c=fraction_2_bin(a.red),s=fraction_2_bin(a.green),u=fraction_2_bin(a.blue);lsb.push(c.slice(-1)),lsb.push(s.slice(-1)),lsb.push(u.slice(-1));var d=c,_=s,l=u}setTimeout(function(){for(var t=$("#output-text"),e=0;e<lsb.length-8;e+=8){for(var n="",r=e;e>r-8;r++)n+=lsb[r];$(t).append(ABC.toAscii(n))}},1e3)});